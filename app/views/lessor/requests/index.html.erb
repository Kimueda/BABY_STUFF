<div class="container">
  <h1 class = "text-center products-page-title mt-5">My requests and offers</h1>
<div class = "my-offers">
<div class = "col d-flex justify-content-center">
 <div class="w-80 shadow p-3  mb-3 mt-3 lessors-card">
  <% @requests_per_offer.each do |offer, requests| %>
    <div>
        <%= offer.item_name %>
      </div>
      <% requests.each do |request| %>
        <% unless request.status == 'rejected' %>
            <%= request.user.first_name %>
            <%= request.start_date.strftime("%b %d, %Y") %> to <%= request.end_date.strftime("%b %d, %Y") %>
            <%= request.status %>
            <div class="d-flex">
            <% if request.status == 'pending' %>
              <%= simple_form_for [:lessor, request] do |f| %>
                <%= f.input :status, as: :hidden, input_html: { value: 'accepted'} %>
                <%= f.submit 'Accept', class: 'btn btn-info mx-3' %>
              <% end %>

              <%= simple_form_for [:lessor, request] do |f| %>
                <%= f.input :status, as: :hidden, input_html: { value: 'rejected'} %>
                <%= f.submit 'Reject', class: 'btn btn-light' %>
              <% end %>
            <% end %>
            </div>
          </div>
        <% end %>
      <% end %>
    </div>
  <% end %>
</div>
</div>
